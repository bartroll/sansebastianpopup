<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDF Flipbook</title>
  <style>
  #flipbook {
    margin: 20px auto;
  }
  #flipbook .page {
    box-sizing: border-box;
    background: white;
    box-shadow: 0 0 5px #aaa;
    overflow: hidden;
  }
  canvas {
    width: 100% !important;
    height: 100% !important;
    display: block;
  }
</style>
</head>
<body>
  <h1 style="text-align:center;">My PDF Flipbook</h1>
  <button id="prev">Previous</button>
  <button id="next">Next</button>
  <div id="flipbook"></div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Turn.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
  <!-- PDF.js -->
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist/build/pdf.min.js"></script>

  <script>
    const url = 'gazeta.pdf'; // name of your PDF

   

    const height = window.innerHeight * 0.9; 
    const width = Math.round(height * 0.707);

    const flipbook = document.getElementById('flipbook');

    // Set flipbook container size dynamically
    flipbook.style.height = height + 'px';
    flipbook.style.width = width + 'px';

     const pdfjsLib = window['pdfjs-dist/build/pdf'];
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@latest/build/pdf.worker.min.js';

    pdfjsLib.getDocument(url).promise.then(pdfDoc => {
      const totalPages = pdfDoc.numPages;

      function renderPage(num) {
        return pdfDoc.getPage(num).then(page => {
          const viewport = page.getViewport({ scale: 1.5 });
          const canvas = document.createElement('canvas');
          const context = canvas.getContext('2d');
          canvas.height = viewport.height;
          canvas.width = viewport.width;

          const renderContext = {
            canvasContext: context,
            viewport: viewport
          };

          return page.render(renderContext).promise.then(() => canvas);
        });
      }

      const renderPromises = [];
      for (let i = 1; i <= totalPages; i++) {
        renderPromises.push(renderPage(i));
      }

      Promise.all(renderPromises).then(canvases => {
        canvases.forEach(canvas => {
          const pageDiv = document.createElement('div');
          pageDiv.className = 'page';
          pageDiv.appendChild(canvas);
          flipbook.appendChild(pageDiv);
        });

        $('#flipbook').turn({
          width: width,
          height: height,
          autoCenter: true,
          display: 'single',
          acceleration: true,
          gradients: true
        });
        // Button handlers
        $('#next').click(function() {
          $('#flipbook').turn('next');
        });

        $('#prev').click(function() {
          $('#flipbook').turn('previous');
        });
      });
    });
  </script>
</body>
</html>
